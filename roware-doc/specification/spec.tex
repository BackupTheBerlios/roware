%------------------------------------------------------------------------------
% Row@re . Spec
%------------------------------------------------------------------------------
\newcommand{\roware}{\textbf{ROW@RE}\ }

\newcommand{\usecase}[5]{
\begin{minipage}{\textwidth}
\textbf{Vorbedingung}\\
#1 \\
\textbf{Beschreibung}\\
#2 \\
\textbf{Nachbedingung Erfolg}\\
#3 \\
\textbf{Nachbedingung Fehlschlag}\\
#4 \\
\textbf{Interaktionen}\\
#5
\end{minipage}
}

\documentclass[11pt, a4paper]{scrbook}
\usepackage{ngerman}
\usepackage[T1]{fontenc}
\usepackage[latin1]{inputenc}
\usepackage{graphicx,color}
\usepackage{eso-pic}
\usepackage{ae}

\definecolor{lightgray}{gray}{.75}
\renewcommand{\familydefault}{\sfdefault}

\begin{document}

  \AddToShipoutPicture{%
    \AtTextCenter{%
      \makebox(0,0)[c]{\resizebox{\textwidth}{!}{%
        \rotatebox{45}{\textsf{\textbf{\color{lightgray}DRAFT}}}}} 
    }
  }


\begin{titlepage}
\renewcommand{\thefootnote}{\fnsymbol{footnote}}
{\Huge
\raggedright
\roware \\
\huge Integriertes EDV-System zur Abwicklung von Ruderegatten
\rule{\textwidth}{0.75pt}
%\par 
\\[4ex]
}


{\parindent=0cm
\center{
	\makebox(0,0)[c]{\resizebox{\textwidth}{!}{%
        	\textsf{\textbf{Spezifikation}}}} 
	}
\vfill
}




\begin{flushleft}
\normalsize
Version 0.11\\[2ex]
\today \\[2ex]
Oliver Urschel\footnote{Aachen/Bad Kreuznach, \texttt{<urschcom@users.berlios.de>}}\\
Tammo van Lessen\footnote{Stuttgart/Mainz, \texttt{<vanto@users.berlios.de>}}\\
Joachim Praetorius\footnote{Berlin, \texttt{<jpraetorius@users.berlios.de>}}\\
\end{flushleft}


\setcounter{footnote}{0}
\end{titlepage}

\onecolumn
{\parindent=0cm\thispagestyle{empty}
\copyright{} Copyright 2003 row@re team
\bigskip

Die Verteilung dieses Dokuments in elektronischer oder gedruckter
Form ist gestattet, solange sein Inhalt einschlie"slich Autoren- und 
Copyright-Angabe unver"andert bleibt und die Verteilung kostenlos
erfolgt, abgesehen von einer Ge\-b"uhr f"ur den Datentr"ager, den
Kopiervorgang usw.
\bigskip

Die in dieser Publikation erw"ahnten Software- und Hardware-Bezeichnungen sind
in den meisten F"allen auch eingetragene Warenzeichen und unterliegen als
solche den gesetzlichen Bestimmungen.
\bigskip

\vfill

Dieses Dokument wurde mit \LaTeX{} gesetzt.
}
\clearpage
\newpage


\thispagestyle{empty}
%\twocolumn
%-------------------------------------------------------------------------
\tableofcontents
%-------------------------------------------------------------------------
\chapter{Einleitung}
\section{Zielsetzung}
In diesem Dokument sind die Anforderungen an das Projekt \roware
detailliert spezifiziert. Das Produkt wird streng nach den hier aufgeführten 
Anforderungen entwickelt. Der Entwicklungsprozess gilt als erfolgreich 
abgeschlossen, wenn das Produkt allen hier aufgeführten Aspekten gerecht wird.
Änderungen an diesem Dokument sind nach Abschluss der Spezifikationsphase nicht mehr ohne das Einverständnis des \roware-Teams möglich.

\section{Produktziele}
Bei \roware handelt es sich um ein Programmsystem, das alle Phasen einer 
Regatta unterstützt. 
Dazu gehört im Vorfeld der Regatta die Erstellung einer Ausschreibung und der Export dieser Informationen in verschiedene Medien. Des weiteren bietet \roware Unterst"utzung f"ur die Erfassung der eingegangenen Meldungen, die Durchführung der Startverlosung und das Erstellen des Meldeergebnisses. 
Während der Regatta unterstützt es das Regattabüro, Waage und Kasse bei Bezahlung, Um- und Abmeldungen, Einsprüchen und der Erfassung der Rennergebnisse.
Nach der Regatta können sowohl automatisch korrigierte Meldeergebnisse, als auch Ergebnisse mit Zeiten und Plazierungen der Teilnehmer erstellt werden.

\section{Produktumgebung}
Das Programm soll auf beliebigen Plattformen lauffähig sein. Deshalb wird es als Webanwendung in PHP implementiert. Der Benutzer benötigt nur einen modernen Browser mit JavaScript-Unterstützung.

\textsl{Vielleicht sollten wir hier ein wenig konkreter sein. Javascript kann relativ unlustig sein. Ich denke da an tatscächliches ECMA-262 und W3C-DOM Unterstützung, was den Zugriff auf HTML-Elemente dann einheitlich über \texttt{getElementByName()} ermöglicht}.

\section{Produktfunktionen}
Das Produkt stellt dem Regattaveranstalter folgende Funktionen zur Verfügung

\subsection*{Ausschreibung}
\begin{itemize}
\item Ausschreibung erstellen
\item Ausschreibung veröffentlichen (HTML, PDF, xregatta)
\end{itemize}

\subsection*{Meldeschluss}
\begin{itemize}
\item Daten einlesen aus xregatta-format
\item Daten eingeben (Papiermeldung)
\item Daten überprüfen und korrigieren
\item Rennen verlosen
\item Rennzeiten festlegen
\item Meldeergebnis veröffentlichen (HTML, PDF, xregatta)
\end{itemize}

\subsection*{Regattabüro}
\begin{itemize}
\item Nachmeldung/Abmeldung/Ummeldung erfassen und damit verbundene Rennverschiebungen verarbeiten
\item Jugendlizenzen kontrollieren/erfassen
\item Lizenzliste einlesen / alternativ -> kontrollierte Lizenzen speichern (für weitere Veranstaltungen)
\item Schiedsrichtereinsatzplan erstellen, veröffentlichen
\item Waage erfassen
\item Kasse Buchungen, Quittung erstellen, Berichte erstellen
\item Rennen verlegen
\item Einsprüche erfassen
\item Schiedsrichterbericht erstellen
\item Urkunden drucken
\item Ergebnisse veröffentlichen (HTML, PDF, xregatta)
\end{itemize}

\subsection*{Start/Ziel}
\begin{itemize}
\item Startberechtigung kontrollieren (Übergewicht, Zusatzgewicht, unerlaubte Renngemeinschaften usw.)
\item Ausschluss von Mannschaften erfassen (Geldstrafen???)
\item Mannschaften zu Rennen einteilen
\item Rennen starten
\item Zwischenzeiten nehmen
\item Unfälle erfassen (Kentern, Bootsschaden usw.)
\item Einsprüche erfassen
\item Zeit nehmen (Ziel)
\item Zielfotos hochladen
\end{itemize}

\chapter{Anforderungen}
Die Anforderungen werden in Form von Anwendungsfällen (Use-Cases) erklärt.
Sie beschreiben die Funktionalität des zu erstellenden Systems.

\section{Aktoren}
\subsection{Benutzer}
Vor der Anmeldung an das System sind haben alle Benutzer die gleiche Funktion und die gleichen Möglichkeiten (\textbf{AKT Benutzer}). Nach der Anmeldung ergibt sich durch das Rechtemanagment eine neue Situation, die Benutzer werden in weitere Gruppen mit unterschiedlichen Rechten aufgeteilt.
\begin{itemize}
\item Benutzer bei Regattaverwaltung (Ausschreibung,Erfassung Meldungen, Ergebnisse) (\textbf{AKT Regatta})
\item Benutzer im Regattabüro (\textbf{AKT Admin})
\item Benutzer an der Kasse (\textbf{AKT Kasse})
\item Benutzer an der Waage (\textbf{AKT Waage})
\item Benutzer am Start (\textbf{AKT Start})
\item Benutzer im Ziel (\textbf{AKT Ziel})
\item Benutzer an der Strecke (\textbf{AKT Zeit})
\item Gast (\textbf{AKT Gast})
\item TODO: weitere Benutzer?
\end{itemize}

\section{Use-Cases}
Die hier beschriebenen Geschäftsprozesse beschreiben ausschließlich die Interaktion zwischen Benutzer und Maschine. Implementations- und Gestaltungsdetails sind hier falsch.

\subsection{Am System anmelden}
\usecase{Browser ist gestartet und zeigt auf http://ip-adresse/}
	{Der Benutzer trägt seinen Namen und sein Passwort in Textfelder ein.
	Danach bestätigt er 
	mit \emph{Return} oder klickt auf \emph{OK}. Darauf hin wird das 
	Passwort überprüft.}
	{Der Benutzer ist nun angemeldet, es erscheint das Hauptfenster}
	{Es wird die Fehlermeldung ``Falsches Kennwort'' angezeigt, das 
	Anmeldefenster bleibt angezeigt.}
	{AKT Benutzer}

\subsection {Ausschreibung erstellen}
\usecase{Der Benutzer ist als \textbf{AKT Regatta} angemeldet}
{Der Benutzer kann eine neue Regatta anlegen. Für diese kann er global Daten wie Termin, Austragungsort, Meldeschluß und Preise für die Rennen festlegen. Genauso sind die Kontaktdaten für die Meldung usw. anzugeben. Hierbei können vorhandene Personendaten aus einem Datenspeicher übernommen werden. Noch ungeklärte Daten müssen nicht sofort angegeben werden sondern können zu einem späteren Zeitpunkt ergänzt werden. Zur Identifizierung solcher Daten ist ein bestimmter Wert z.B. ``-'' vorzusehen. Danach kann der Nutzer beliebig viele Rennen anlegen, wobei zur Spezifizierung die folgenden Daten angegeben werden müssen: Bootsklasse, Leistungsklasse, Altersgruppe, Strecke. Ein mehrfaches Anlegen eines Rennens mit den \emph{gleichen} Daten ist nicht möglich. Die Reihenfolge der Rennen ist zu jeder Zeit veränderbar. Die Rennen unter der Stelle, an der ein verschobenes Rennen eingefügt wird, werden nach unten verschoben.

Ein nachträgliches bearbeiten der eingegebenen Daten ist zu jedem Zeitpunkt möglich. Die obigen Plausibilitätskontrollen werden jeweils neu getestet, so daß das System nur konsistente, sinnvolle Daten speichern kann.}
{Die Veranstaltung wird mit den eingegebenen Daten gespeichert.}
{Der Nutzer wird auf die Fehler in den eingegebenen Daten hingewiesen. Die Veranstaltung wird \textbf{nicht} gespeichert.}
{AKT Regatta}

\subsection {Ausschreibung veröffentlichen}
\usecase{Der Benutzer ist als \textbf{AKT Regatta} angemeldet. Es existiert eine Ausschreibung ohne inhaltliche Fehler. Alle Veranstalterdaten der Ausschreibung sind ausgefüllt und nicht mit ``-'' gefüllt.}
{Eine abgeschlossene Ausschreibung kann durch den Nutzer veröffentlicht werden. Hierbei führt das System letzte Plausibilitäskontrollen an den eingegebenen Daten durch. Insbesondere müssen alle Daten die allgemein für die Regatta gelten ausgefüllt worden sein. Dann exportiert das System die relevanten Daten in verschiedene vom Nutzer wählbare Formate. Als Exportformate werden hierbei PDF, HTML und xregatta unterstützt. Diese Daten werden auch auf dem Server gehalten und können durch den Nutzer mittels des Browsers heruntergeladen werden. Eine veröffentlichte Ausschreibung kann nicht mehr verändert werden. Auf diesen Umstand soll der Nutzer vor der Veröffentlichung hingewiesen werden und sie explizit bestätigen müssen. Eine erneute Veröffentlichung in beliebigen der erwähnten Formate ist hingegen jederzeit möglich.}
{Die Ausschreibung wird in den vom Nutzer gewählten Formaten veröffentlicht (Die Daten werden im passenden Format serialisiert). Eine Änderung der Ausschreibung ist nicht mehr möglich.}
{Der Nutzer wird auf eventuelle Fehler in der Ausschreibung hingewiesen, die die Veröffentlichung verhindert haben (dazu gehört auch ein Abbruch des Nutzers bei dem Hinweis auf Unveränderbarkeit einer veröffentlichten Ausschreibung). Die Ausschreibung ist weiterhin änderbar, die Ausschreibungsdateien werden nicht erzeugt.}
{AKT Regatta}

\subsection {Daten aus xregatta Format einlesen}
\usecase{Der Nutzer ist als AKT Admin angemeldet. Es existiert eine veröffentlichte Ausschreibung. Es liegt eine Meldedatei im xregatta Format vor.}
{Der Nutzer kann aus einer Auswahl die Regatta auswählen, die er zu bearbeiten wünscht. Hierbei werden nur veröffentlichte Ausschreibungen berücksichtigt. Der Nutzer kann nun auswählen, daß er Meldedaten hinzufügen will. Hierzu existiert die Option ``aus xregatta Format''. Dazu kann der Nutzer über seinen Browser die entsprechende Datei auf den Server uploaden. Dort wird die Datei auf Validität gegenüber der DTD oder dem Schema getestet. Ist sie korrekt werden dem Nutzer die Daten aus der Datei angezeigt. Nun kann er diese per Klick für die Regatta übernehmen (\emph{Vielleicht sollte man auch die Möglichkeit zulassen nur Teile zu übernehmen, also eine Tabellenansicht, in der man einzelne zeilen per Checkbox auswählen kann}).}
{Die entsprechenden Daten werden für die gewählte Veranstaltung übernommen.}
{Es werden keine Daten für die entsprechende Veranstaltung übernommen.}
{AKT Admin}

\subsection {Daten eingeben}
\usecase{Der Nutzer ist als AKT Admin angemeldet. Es existiert eine veröffentlichte Ausschreibung.}
{Der Nutzer kann aus einer Auswahl die Regatta auswählen, die er zu bearbeiten wünscht. Hierbei werden nur veröffentlichte Ausschreibungen berücksichtigt. Der Nutzer kann nun auswählen, daß er Meldedaten hinzufügen will. Hierzu existiert die Option ``per Hand''. Nun müssen zuerst die Kontaktinformationen für den meldenden Verein eingegeben werden. Danach können beliebig viele Meldungen zu Rennen eingegeben werden. Hierbei werden die zu Verfügung stehenden Rennen und schon eingegebene Personen zur leichteren Übernahme durch den Nutzer angezeigt. Die Personen sind auf den jeweiligen Verein begrenzt, d.h. es werden nicht alle schon eingegebenen Personen angezeigt. Zum Abschluß bekommt der Nutzer noch einmal die angegebenen Daten angezeigt und kann diese für die Regatta übernehmen.} 
{Die entsprechenden Daten werden für die gewählte Veranstaltung übernommen.}
{Es werden keine Daten für die entsprechende Veranstaltung übernommen.}
{AKT Admin}

\subsection {Daten überprüfen und korrigieren}
\usecase{Der Nutzer ist als AKT Admin angemeldet. Es existiert eine veröffentlichte Ausschreibung, zu der schon Meldedaten eingegeben worden sind.}
{Der Nutzer kann aus einer Auswahl die Regatta auswählen, die er zu bearbeiten wünscht. Hierbei werden nur veröffentlichte Ausschreibungen berücksichtigt. Der Nutzer kann nun auswählen, daß er Meldedaten bearbeiten will. Nun kann er sich die schon eingegebenen Daten nach verschiedenen Kriterien sortiert (meldender Verein, Rennen, Jahrgänge) anzeigen lassen. Diese Daten lassen sich nun satzweise ändern oder löschen. Bei Änderungen werden wieder Plausibilitätsprüfungen vorgenommen.}
{Die geänderten Daten werden übernommen, entfernte Daten werden gelöscht.}
{Der Nutzer wird auf die Fehler in seiner Änderung hingewiesen, die eingegebenen Daten werden nicht übernommen.}
{AKT Admin}

\subsection {Rennen verlosen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Rennzeiten festlegen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Meldeergebnis veröffentlichen}
\usecase{Der Nutzer ist als AKT Admin angemeldet. Es existiert eine veröffentlichte Ausschreibung, zu der schon Meldedaten eingegeben worden sind.}
{Der Nutzer kann aus einer Auswahl die Regatta auswählen, die er zu bearbeiten wünscht. Hierbei werden nur veröffentlichte Ausschreibungen berücksichtigt. Der Nutzer kann nun auswählen, daß er ein Meldeergebnis veröffentlichen will. Dann exportiert das System die relevanten Daten in verschiedene vom Nutzer wählbare Formate. Als Exportformate werden hierbei PDF, HTML und xregatta unterstützt. Diese Daten werden auch auf dem Server gehalten und können durch den Nutzer mittels des Browsers heruntergeladen werden. Eine weitere Veränderung der Veranstaltung ist jederzeit möglich. } 
{Das Meldeergebnis wird in den gewählten Formaten veröffentlicht.}
{Es werden keine Dokumente erzeugt.}
{AKT Admin}

\subsection {Nachmeldung erfassen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Abmeldung erfassen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Ummeldung erfassen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Jugendlizenzen erfassen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Jugendlizenzen kontrollieren}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Schiedsrichtereinsatzplan erstellen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Schiedsrichtereinsatzplan veröffentlichen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Waage erfassen}
\usecase{Der Nutzer ist als AKT Admin oder AKT Waage angemeldet. Es existieren Meldungen zu LGW Rennen.}
{Der Nutzer bekommt alle Meldungen zu LGW-Rennen bzw. Steuerleute nach Vereinen getrennt angezeigt. Wählt er eine bestimmte Person aus, werden außerdem die in Frage kommenden Rennen (Renn-Nr., Bezeichnung, Startzeit) angezeigt. Der Nutzer kann nun das bestimmte Gewicht des Aktiven eintragen. Den Check zu den Gewichtsgrenzen führt das System selbständig durch, da hier verschiedenen Grenzen für denselben Aktiven gelten können.}
{Das Gewicht wird für den jeweiligen Aktiven gespeichert.

\emph{Sollte hier ein Mehrfaches Editieren während eine Veranstaltung erlaubt sein, oder nicht??}}
{Es werden keine Daten gespeichert.}
{AKT Waage, AKT Admin}

\subsection {Kassenbuchungen erstellen}
\usecase{Der Nutzer ist als AKT Kasse oder AKT Admin angemeldet. Es existiert eine veröffentlichte Ausschreibung, zu der schon Meldedaaten eingegeben worden sind.}
{Der Nutzer bekommt alle meldenden Verein und Renngemeinschaften sowie deren fällige Startgelder angezeigt. Wähhlt er einen bestimmten Verein aus der Liste aus bekommt alle Rennen und deren Kosten im einzelnen angezeigt. Hier kann der Nutzer nun einzelne oder alle Rennen als bezahlt markieren. Die zu leistende Summe des Vereins wird um die entsprechende Summe reduziert. Fällt die Summe des fälligen Startgeldes auf 0.- EUR wird der Verein nicht mehr in der Liste angezeigt. Das System führt auch Nachmeldegelder und Pfand für Einsprüche mit auf, so daß ein Verein, der bereits aus der Liste verwchwunden ist wieder dort auftauchen kann, wenn noch weitere Gelder fällig werden, z.B. durch Nachmeldungen.}
{Die bezahlten Rennen und Beträge werden für die meldenden Vereine gespeichert.}
{Es werden keine Daten gespeichert.}
{AKT Kasse, AKT Admin}

\subsection {Quittung erstellen}
\usecase{Der Nutzer ist als AKT Kasse oder AKT Admin angemeldet. Es sind schon Buchungen vorgenommen worden.}
{Der Nutzer bekommt alle Vereine für die schon Buchungen vorgenommen worden sind angezeigt. Wählt er einen bestimmten Verein aus der Liste aus, so bekommt er die bereits bezahlten Rennen angezeigt. Hierbei werden die Rennnr., die Rennbezeichnung, die Anzahl der Meldungen in dem Rennen, die Einzelkosten pro Meldung und die akkumulierten Kosten für dieses Rennen aufgeführt. Des weiteren enthält die Ansicht den Namen der Veranstaltung und des jeweiligen Vereins, sowie eine Gesamtsumme. Diese Ansicht läßt sich über die Druckfunktion des Browsers drucken und dient dann als Quittung.}
{Die Quittung für den jeweiligen Verein und die bezahlten Rennen wird angezeigt.}
{Es wird keine Quittung für den Verein angezeigt.}
{AKT Kasse, AKT Admin}

\subsection {Berichte erstellen}
\usecase{}{TODO}{}{}{AKT Kasse, AKT Admin}

\subsection {Rennen verlegen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Einsprüche erfassen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Schiedsrichterbericht erstellen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Urkunden drucken}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Ergebnisse veröffentlichen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Startberechtigung kontrollieren}
\usecase{}{TODO}{}{}{AKT Start, AKT Admin}

\subsection {Ausschluss von Mannschaften erfassen}
\usecase{}{TODO}{}{}{AKT Start, AKT Ziel}

\subsection {Mannschaften zu Rennen einteilen}
\usecase{}{TODO}{}{}{AKT Start, AKT Admin}

\subsection {Rennen starten}
\usecase{}{TODO}{}{}{AKT Start, AKT Admin}

\subsection {Zwischenzeiten nehmen}
\usecase{}{TODO}{}{}{AKT Zeit, AKT Admin}

\subsection {Unfälle erfassen}
\usecase{}{TODO}{}{}{AKT Zeit, AKT Start, AKT Ziel, AKT Admin}

\subsection {Einsprüche erfassen}
\usecase{}{TODO}{}{}{AKT Admin}

\subsection {Zeit nehmen}
\usecase{}{TODO}{}{}{AKT Ziel, AKT Admin}

\subsection {Zielfotos hochladen}
\usecase{}{TODO}{}{}{AKT Ziel, AKT Admin}
TODO: Weitere Usecases?
%-------------------------------------------------------------------------
\chapter{Nichtfunktionale Anforderungen}
\section{Leistungsanforderungen}
TODO: Mengengerüst, Kommunikation, Synchronisation der Daten
\section{Entwurfseinschränkungen}
TODO: Nur PHP/PostgreSQL; HTML, JavaScript ?
\section{Verfügbarkeit}
Keine besonderen Anforderungen bzgl. Verfügbarkeit.
\section{Sicherheit}
TODO: Daten werden in Datenbank persistent gespeichert, regelmässige 
automatische Backups etc.
\section{Robustheit}
TODO: Robustheit gegenüber fehlerhaften Einträgen, Validierung etc
\section{Wartbarket}
TODO: Entwurfsregeln zur Verbesserung der Wartbarkeit des PHPcodes, z.B. 
Objektorientierung, Daten- kapselung und -abstraktion, Trennung von 
Businesslogik und Darstellungsschicht.
\section{Portabilität}
TODO: Windows, Unix-derivate -> (W|L)AMP
%-------------------------------------------------------------------------
\chapter{Graphische Benutzeroberfläche}
TODO
\section{Anmeldefenster}
TODO
\section{Hauptfenser}
TODO
%-------------------------------------------------------------------------
\chapter{Daten}
TODO Datenstruktur beschreiben
%-------------------------------------------------------------------------
\chapter{Begriffslexikon}
%-------------------------------------------------------------------------
\chapter{Offene Fragen}
%\begin{itemize}
%\item Über welchen Zeitraum werden die Daten gespeichert
%\end{itemize}
\end{document}
